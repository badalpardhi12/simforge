# env_configs/all_robots.yaml
scene:
  show_viewer: true
  dt: 0.005
  max_fps: 60
  backend: gpu

objects:
  - type: "plane"
    position: [0, 0, 0]
    size: [5, 5, 0.1]
  - type: "box"
    name: table1
    position: [-1.0, 0.0, 0.38]
    orientation_rpy: [0, 0, 0]
    size: [1.2, 0.8, 0.76]

# Defaults applied to every robot unless overridden below
defaults:
  control:
    planner: RRTConnect
    planner_timeout: 1.0
    planner_resolution: 0.02
    planner_max_retry: 10
    cartesian_waypoints: 200
    strict_cartesian: false
    # World-collision options
    min_clearance_m: 0.02  # 2cm buffer via FCL distance (if compiled)
    # Pairs involving robots and/or objects that should ignore collision
    world_allowed_pairs:
      - ["TX2_60_1/tool0", "obj:table1"]    # e.g., resting contact
      - ["UR5e_1/tool0", "obj:table1"]
      - ["MECA500_1/meca_gripper_link", "obj:table1"]

robots:
  - name: UR5e_1
    urdf: "assets/ur5e/ur5e.urdf"
    pose: {position: [0.5, 0.5, 0.0], rpy: [0, 0, 0]}
    fixed_base: true
    initial_joint_positions: [0, -90, 0, -90, 0, 0]  # degrees
    end_effector_link: wrist_3_link
    control:
      joint_speed_limit: 0.5
      cartesian_speed_limit: 0.1
      default_tcp: [0, 0, 0, 1, 0, 0, 0]
      strict_cartesian: true
      collision_check: true
      ccd_substeps: 6
      ground_plane_z: 0.0
      # Slightly shrink all collision meshes to reduce false-positive self-collisions
      collision_mesh_shrink: 0.97
      allowed_collision_links:
      - [base_link, shoulder_link]
      - [shoulder_link, upper_arm_link]
      - [upper_arm_link, forearm_link]
      - [forearm_link, wrist_1_link]
      - [wrist_1_link, wrist_2_link]
      - [wrist_2_link, wrist_3_link]